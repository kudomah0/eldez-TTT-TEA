/**
 * RubyGems â€“ Main Module
 * Made by Franco Correa <hire@francocorrea.com.uy>
 */

// Library dependencies
var request = require('superagent');

// Module dependencies
var endpoints = require('./helpers/endpoints');

/**
 * Search for a gem
 * @param {string} search_term - Term to be looked for
 * @param {function} callback - Async block to retrieve the result data */
exports.search = function(search_term, callback) {
    const ENDPOINT = endpoints.search_endpoint(search_term);
    request
        .get(ENDPOINT)
        .end(function (err, res) {
            if (!err) {
                callback(null, res.body);
            } else {
                callback(err, null);
            }
        });
}

/**
 * Look for a specific gem
 * @param {string} gem_name - Name of the requested gem
 * @param {function} callback - Async block to retrieve the result data  */
exports.gem = function (gem_name, callback) {
    const ENDPOINT = endpoints.gem_endpoint(gem_name);
    request
        .get(ENDPOINT)
        .end(function (err, res) {
            if (!err) {
                callback(null, res.body);
            } else {
                callback(err, null);
            }
        });
}
